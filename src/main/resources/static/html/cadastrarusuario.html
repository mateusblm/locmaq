<!DOCTYPE html>
<html>
<head>
    <title>Cadastrar Usuario - LocMac</title>
    <link rel="stylesheet" href="../css/padrao.css">
    <script>
        function showSuccessPopup() {
            alert("Usuario cadastrado com sucesso!");
        }

        function handleFormSubmit(event) {
            event.preventDefault();
            const form = event.target;

            fetch(form.action, {
                method: form.method,
                body: new URLSearchParams(new FormData(form))
            })
            .then(response => {
                if (response.ok) {
                    showSuccessPopup();
                    form.reset();
                } else {
                    alert("Erro ao cadastrar o usuario.");
                }
            });
        }

        window.addEventListener('DOMContentLoaded', function() {
            document.getElementById('usuarioForm').onsubmit = handleFormSubmit;
        });
    </script>
</head>
<body>
<header class="main-header">
    <div class="logo">LocMac</div>
    <nav class="nav-links"></nav>
    <div class="user-info">
        <span id="user-role"></span>
        <img src="../imgs/images.png" class="user-image">
        <a href="../html/usuario.html"><span id="user-name"></span></a>
        <a href="/logout" class="logout-btn">Sair</a>
    </div>
</header>
<main>
    <form  action="/gestor/cadastrar" method="post" id="usuarioForm" style="background:#fff;padding:24px;border-radius:10px;max-width:400px;margin:auto;box-shadow:0 2px 8px #0001;">
        <h2>Cadastrar Novo Usuario</h2>
        <label>Nome:</label>
        <input type="text" id="usuarioNome" name="nome" required>
        <label>Senha:</label>
        <input type="password" id="usuarioSenha" name="senha" required>
        <label>Tipo de Usuario:</label>
        <select id="usuarioTipo" name="tipoUsuario" required>
            <option value="">Selecione...</option>
            <option value="PLANEJADOR">Planejador</option>
            <option value="LOGISTICA">Logistica</option>
        </select>
        <div style="text-align:right;">
            <button type="submit" style="margin-top:12px;">Cadastrar</button>
            <button type="reset" style="margin-top:12px;">Limpar</button>
        </div>
    </form>
</main>
<script src="../js/menu.js"></script>
</body>
</html>